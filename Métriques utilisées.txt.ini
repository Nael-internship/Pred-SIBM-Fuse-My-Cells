ğŸ“ MÃ©triques utilisÃ©es

On Ã©value les images selon deux grands critÃ¨res :

La similaritÃ© en pixels â†’ Ã  quel point lâ€™image prÃ©dite ressemble Ã  lâ€™image rÃ©elle.

La segmentation â†’ est-ce que lâ€™image prÃ©dite est suffisamment bonne pour segmenter correctement les cellules ?

Pour cela, on calcule 4 mÃ©triques :

N_SSIM_nucleus (qualitÃ© des noyaux)

N_SSIM_membrane (qualitÃ© des membranes)

N_IOU_nucleus (segmentation des noyaux)

N_IOU_membrane (segmentation des membranes)

ğŸ” 1. N_SSIM â€” SimilaritÃ© structurelle normalisÃ©e
But :

Comparer lâ€™image prÃ©dite Ã  la vÃ©ritÃ© terrain (Ground Truth), en mesurant leur similaritÃ© structurelle (texture, contraste, dÃ©tails).

ProblÃ¨me rencontrÃ©

Les images Ã  prÃ©dire sont dÃ©jÃ  trÃ¨s proches du Ground Truth, donc les valeurs de SSIM sont toutes â€œcollÃ©esâ€ prÃ¨s de 1 â†’ difficile de dÃ©partager les modÃ¨les.

Solution : normaliser le SSIM

On calcule dâ€™abord :

prediction_ssim = SSIM(prÃ©diction, GT)

reference_ssim = SSIM(image dâ€™entrÃ©e, GT)

Puis on â€œÃ©tireâ€ la valeur :

n_ssim = (prediction_ssim - reference_ssim) / (1 - reference_ssim)

ğŸ‘‰ Cela permet de mieux distinguer les bonnes prÃ©dictions des prÃ©dictions moyennes.

On obtient :

N_SSIM_nucleus

N_SSIM_membrane

ğŸ§¬ 2. N_IOU â€” QualitÃ© de segmentation normalisÃ©e (via Cellpose)
But :

VÃ©rifier si lâ€™image prÃ©dite permet une segmentation utile pour la biologie (noyaux et membranes).

ğŸ¯ MÃ©thode

On segmente :

le Ground Truth

lâ€™image dâ€™entrÃ©e

lâ€™image prÃ©dite
avec Cellpose (modÃ¨les "nuclei" et "cyto3").

On calcule trois IOU :

best_iou
= IOU entre segmentation du GT et segmentation de lâ€™entrÃ©e
(câ€™est la meilleure segmentation rÃ©aliste possible â†’ â€œniveau maxâ€)

reference_iou
= IOU entre segmentation de lâ€™entrÃ©e et segmentation Cellpose du GT
(mesure du niveau â€œde baseâ€)

prediction_iou
= IOU entre segmentation de la prÃ©diction et celle du GT

Normalisation

On transforme la valeur en :


n_iou = (prediction_iou - reference_iou) / (best_iou - reference_iou)


ğŸ‘‰ Cela permet dâ€™avoir une mÃ©trique entre 0 et 1, plus juste selon la difficultÃ© de segmentation du volume.

On obtient :

N_IOU_nucleus

N_IOU_membrane

ğŸ“ 3. Normalisation des images

Toutes les images sont normalisÃ©es avec une normalisation par percentiles :

percentile minimum = 2

percentile maximum = 99.8

Câ€™est inspirÃ© de lâ€™outil CSBDeep / CARE, trÃ¨s utilisÃ© en restauration dâ€™images biologiques.

Pourquoi cette normalisation ?

âœ” stable â†’ refaire la normalisation deux fois ne modifie quasiment pas lâ€™image
âœ” juste â†’ les modÃ¨les qui normalisent ou non pendant lâ€™entraÃ®nement ne sont pas avantagÃ©s/dÃ©savantagÃ©s
âœ” robuste â†’ Ã©limine les valeurs extrÃªmes dues au bruit ou Ã  des saturations

Fonction utilisÃ©e

(La fonction Python fournie dans le texte)

ğŸ§¾ RÃ©sumÃ© vulgarisÃ© (ultra-simple)

Le challenge Ã©value ton modÃ¨le sur :

1. QualitÃ© visuelle des images (SSIM)

Est-ce que ton image ressemble vraiment Ã  ce que verrait un microscope multivue fusionnÃ© ?

2. UtilitÃ© pour la biologie (IOU)

Est-ce que les biologistes peuvent segmenter correctement les cellules et les membranes grÃ¢ce Ã  ton rÃ©sultat ?

3. Normalisation homogÃ¨ne

Toutes les images sont mises Ã  la mÃªme Ã©chelle de luminositÃ©, pour comparer les modÃ¨les Ã©quitablement.